import{a as A,b as N,r as _,o as O,e as G,w as j,v as F,f as r,t as P,u as K,h as V,i as H}from"./entry.9f12a9b3.js";const M=""+globalThis.__publicAssetsURL("load.png"),z={class:"flex justify-center flex-wrap pt-2 flex-col items-center"},q=r("p",{class:"text-lg text-gray-300"},"RGB Lamp Display Emulator by KK",-1),J=r("a",{class:"text-xs text-blue-400 underline",href:"https://github.com/KK-mp4/RGB-Lamp-Display-Emulator#readme",target:"_blank"},"More info in GitHub",-1),T=r("a",{class:"mb-5 text-xs text-blue-400 underline",href:"https://kk-mp4.github.io/Lamp-Display-Emulator/",target:"_blank",rel:"noopener noreferrer"},"Monochrome 1 bit version",-1),W=r("p",{class:"mb-1 text-sm text-gray-300"},"Lamp texture resolution:",-1),$=H('<option value="1x1">1x1</option><option value="2x2">2x2</option><option value="4x4">4x4</option><option value="8x8">8x8</option><option value="16x16">16x16</option>',5),Q=[$],X={class:"mb-1 text-sm text-gray-300"},Y={key:0,class:"animate-spin h-7 w-7 top-52 absolute",src:M},Z={class:"w-full h-full mt-5 flex justify-center",style:{"image-rendering":"pixelated"}},ee=["src"],oe=A({__name:"index",setup(te){N({title:"Generator"});const i=_("16x16"),D=_("");let e=16;const c=_(512);let x,I=_(!1),m=document.createElement("canvas");m.width=16,m.height=16;let B=m.getContext("2d");async function C(){const l=Date.now();E(),I.value=!0;const n=new Image;n.src=x,await new Promise(t=>{n.onload=()=>t(1)});let o=n.width,d=n.height;o>512&&(o=512),d>512&&(d=512);const y=document.createElement("canvas");y.width=o,y.height=d;const L=y.getContext("2d",{willReadFrequently:!0});L.drawImage(n,0,0,n.width,n.height);const g=new Image;g.src="./"+i.value+"/ROff.png",await new Promise(t=>{g.onload=()=>t(1)});const u=new Image;u.src="./"+i.value+"/ROn.png",await new Promise(t=>{u.onload=()=>t(1)});const w=new Image;w.src="./"+i.value+"/GOff.png",await new Promise(t=>{w.onload=()=>t(1)});const f=new Image;f.src="./"+i.value+"/GOn.png",await new Promise(t=>{f.onload=()=>t(1)});const p=new Image;p.src="./"+i.value+"/BOff.png",await new Promise(t=>{p.onload=()=>t(1)});const v=new Image;v.src="./"+i.value+"/BOn.png",await new Promise(t=>{v.onload=()=>t(1)});const h=document.createElement("canvas");h.width=o*3*e,h.height=d*3*e;const s=h.getContext("2d"),b=128,R=L.getImageData(0,0,o,d);for(let t=0;t<d;t++)for(let a=0;a<o;a++)R.data[(t*o+a)*4]>=b?(s.drawImage(u,a*3*e,t*3*e),s.drawImage(u,a*3*e,t*3*e+e),s.drawImage(u,a*3*e,t*3*e+e*2)):(s.drawImage(g,a*3*e,t*3*e),s.drawImage(g,a*3*e,t*3*e+e),s.drawImage(g,a*3*e,t*3*e+e*2)),R.data[(t*o+a)*4+1]>=b?(s.drawImage(f,a*3*e+e,t*3*e),s.drawImage(f,a*3*e+e,t*3*e+e),s.drawImage(f,a*3*e+e,t*3*e+e*2)):(s.drawImage(w,a*3*e+e,t*3*e),s.drawImage(w,a*3*e+e,t*3*e+e),s.drawImage(w,a*3*e+e,t*3*e+e*2)),R.data[(t*o+a)*4+2]>=b?(s.drawImage(v,a*3*e+e*2,t*3*e),s.drawImage(v,a*3*e+e*2,t*3*e+e),s.drawImage(v,a*3*e+e*2,t*3*e+e*2)):(s.drawImage(p,a*3*e+e*2,t*3*e),s.drawImage(p,a*3*e+e*2,t*3*e+e),s.drawImage(p,a*3*e+e*2,t*3*e+e*2));D.value=h.toDataURL(),I.value=!1,k(),console.log(Date.now()-l+"ms - Calculation time")}async function E(){const l=new Image;l.src="./faviconLoad.ico",await new Promise(o=>{l.onload=()=>o(1)}),B.drawImage(l,0,0,16,16),document.getElementById("favicon").setAttribute("href",m.toDataURL()),history.replaceState(null,null,window.location.hash=="#1"?"#0":"#1")}async function k(){const l=new Image;l.src="./favicon.ico",await new Promise(o=>{l.onload=()=>o(1)}),B.drawImage(l,0,0,16,16),document.getElementById("favicon").setAttribute("href",m.toDataURL()),history.replaceState(null,null,window.location.hash=="#1"?"#0":"#1")}async function U(l){if(l.target.files&&l.target.files[0]){let n=new FileReader;n.readAsDataURL(l.target.files[0]),n.onload=o=>{x=o.target.result,C()},console.log("Image loaded: "+x)}}async function S(){i.value==="1x1"?(e=1,c.value=8192):i.value==="2x2"?(e=2,c.value=4096):i.value==="4x4"?(e=4,c.value=2048):i.value==="8x8"?(e=8,c.value=1024):(e=16,c.value=512),x&&C()}return(l,n)=>(O(),G("div",z,[q,J,T,W,j(r("select",{"onUpdate:modelValue":n[0]||(n[0]=o=>i.value=o),class:"w-64 mb-5 rounded-lg border h-7 bg-gray-700 border-gray-600 text-gray-400",onChange:n[1]||(n[1]=o=>S())},Q,544),[[F,i.value]]),r("p",X,"PNG or JPG ("+P(c.value)+"x"+P(c.value)+"px max)",1),r("input",{class:"block text-sm text-gray-400 rounded-lg border cursor-pointer focus:outline-none bg-gray-700 border-gray-600 placeholder-gray-400",type:"file",accept:".png, .jpg",onChange:n[2]||(n[2]=o=>U(o))},null,32),K(I)?(O(),G("img",Y)):V("",!0),r("div",Z,[r("img",{src:D.value,class:"w-[75%]"},null,8,ee)])]))}});export{oe as default};
