import{a as k,b as N,r as I,o as B,e as L,w as j,v as A,f as r,t as P,u as K,h as V,i as F}from"./entry.e0736dac.js";const H=""+globalThis.__publicAssetsURL("load.png"),z={class:"flex justify-center flex-wrap pt-2 flex-col items-center"},M=r("p",{class:"text-lg text-gray-300"},"RGB Lamp Display Emulator by KK",-1),J=r("a",{class:"mb-5 text-xs text-blue-400 underline",href:"https://github.com/KK-mp4/RGB-Lamp-Display-Emulator#readme",target:"_blank"},"More info in GitHub",-1),T=r("p",{class:"mb-1 text-sm text-gray-300"},"Lamp texture resolution:",-1),W=F('<option value="1x1">1x1</option><option value="2x2">2x2</option><option value="4x4">4x4</option><option value="8x8">8x8</option><option value="16x16">16x16</option>',5),$=[W],q={class:"mb-1 text-sm text-gray-300"},Q={key:0,class:"animate-spin h-7 w-7 mt-5",src:H},X={class:"w-full h-full mt-5 flex justify-center",style:{"image-rendering":"pixelated"}},Y=["src"],ae=k({__name:"index",setup(Z){N({title:"Generator"});const i=I("16x16"),R=I("");let e=16;const c=I(512);let x,_=I(!1),m=document.createElement("canvas");m.width=16,m.height=16;let C=m.getContext("2d");async function D(){const l=Date.now();G(),_.value=!0;const o=new Image;o.src=x,await new Promise(a=>{o.onload=()=>a(1)});let s=o.width,d=o.height;s>512&&(s=512),d>512&&(d=512);const y=document.createElement("canvas");y.width=s,y.height=d;const O=y.getContext("2d");O.drawImage(o,0,0,o.width,o.height);const g=new Image;g.src="./"+i.value+"/ROff.png",await new Promise(a=>{g.onload=()=>a(1)});const u=new Image;u.src="./"+i.value+"/ROn.png",await new Promise(a=>{u.onload=()=>a(1)});const w=new Image;w.src="./"+i.value+"/GOff.png",await new Promise(a=>{w.onload=()=>a(1)});const f=new Image;f.src="./"+i.value+"/GOn.png",await new Promise(a=>{f.onload=()=>a(1)});const p=new Image;p.src="./"+i.value+"/BOff.png",await new Promise(a=>{p.onload=()=>a(1)});const v=new Image;v.src="./"+i.value+"/BOn.png",await new Promise(a=>{v.onload=()=>a(1)});const h=document.createElement("canvas");h.width=s*3*e,h.height=d*3*e;const n=h.getContext("2d");for(let a=0;a<d;a++)for(let t=0;t<s;t++){const b=O.getImageData(t,a,1,1).data;b[0]>=128?(n.drawImage(u,t*3*e,a*3*e),n.drawImage(u,t*3*e,a*3*e+e),n.drawImage(u,t*3*e,a*3*e+e*2)):(n.drawImage(g,t*3*e,a*3*e),n.drawImage(g,t*3*e,a*3*e+e),n.drawImage(g,t*3*e,a*3*e+e*2)),b[1]>=128?(n.drawImage(f,t*3*e+e,a*3*e),n.drawImage(f,t*3*e+e,a*3*e+e),n.drawImage(f,t*3*e+e,a*3*e+e*2)):(n.drawImage(w,t*3*e+e,a*3*e),n.drawImage(w,t*3*e+e,a*3*e+e),n.drawImage(w,t*3*e+e,a*3*e+e*2)),b[2]>=128?(n.drawImage(v,t*3*e+e*2,a*3*e),n.drawImage(v,t*3*e+e*2,a*3*e+e),n.drawImage(v,t*3*e+e*2,a*3*e+e*2)):(n.drawImage(p,t*3*e+e*2,a*3*e),n.drawImage(p,t*3*e+e*2,a*3*e+e),n.drawImage(p,t*3*e+e*2,a*3*e+e*2))}R.value=h.toDataURL(),_.value=!1,E(),console.log(Date.now()-l+"ms - Calculation time")}async function G(){const l=new Image;l.src="./faviconLoad.ico",await new Promise(s=>{l.onload=()=>s(1)}),C.drawImage(l,0,0,16,16),document.getElementById("favicon").setAttribute("href",m.toDataURL()),history.replaceState(null,null,window.location.hash=="#1"?"#0":"#1")}async function E(){const l=new Image;l.src="./favicon.ico",await new Promise(s=>{l.onload=()=>s(1)}),C.drawImage(l,0,0,16,16),document.getElementById("favicon").setAttribute("href",m.toDataURL()),history.replaceState(null,null,window.location.hash=="#1"?"#0":"#1")}async function U(l){if(l.target.files&&l.target.files[0]){let o=new FileReader;o.readAsDataURL(l.target.files[0]),o.onload=s=>{x=s.target.result,D()},console.log("Image loaded: "+x)}}async function S(){i.value==="1x1"?(e=1,c.value=8192):i.value==="2x2"?(e=2,c.value=4096):i.value==="4x4"?(e=4,c.value=2048):i.value==="8x8"?(e=8,c.value=1024):(e=16,c.value=512),x&&D()}return(l,o)=>(B(),L("div",z,[M,J,T,j(r("select",{"onUpdate:modelValue":o[0]||(o[0]=s=>i.value=s),class:"w-64 mb-5 rounded-lg border h-7 bg-gray-700 border-gray-600 text-gray-400",onChange:o[1]||(o[1]=s=>S())},$,544),[[A,i.value]]),r("p",q,"PNG or JPG ("+P(c.value)+"x"+P(c.value)+"px max)",1),r("input",{class:"block text-sm text-gray-400 rounded-lg border cursor-pointer focus:outline-none bg-gray-700 border-gray-600 placeholder-gray-400",type:"file",accept:".png, .jpg",onChange:o[2]||(o[2]=s=>U(s))},null,32),K(_)?(B(),L("img",Q)):V("",!0),r("div",X,[r("img",{src:R.value,class:"w-[75%]"},null,8,Y)])]))}});export{ae as default};
